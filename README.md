# TDS/EC Pro Sensor Extension v4.0.0

**High Precision Water Quality Sensor for MicroBlock/MicroPython**

‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Temperature Sensor - ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥

---

## üìã ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

- [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°](#‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°)
- [‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥](#‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥)
- [‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á](#‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á)
- [‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Hardware](#‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠-hardware)
- [‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô](#‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)
- [Blockly Blocks](#blockly-blocks)
- [‡∏Å‡∏≤‡∏£ Calibrate](#‡∏Å‡∏≤‡∏£-calibrate)
- [‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô](#‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô)
- [‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ](#‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ)
- [Troubleshooting](#troubleshooting)

---

## üìñ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

Extension ‡∏ô‡∏µ‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö **DFRobot Gravity TDS Sensor** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≥ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Temperature Sensor

### ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏Æ‡πÇ‡∏î‡∏£‡πÇ‡∏õ‡∏ô‡∏¥‡∏Å‡∏™‡πå (Hydroponics)
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏£‡∏≠‡∏á‡∏ô‡πâ‡∏≥ (Water Filtration)
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≥ (Water Quality Monitoring)
- ‚úÖ ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£ (Agriculture Projects)
- ‚úÖ ‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (Science Projects)

### ‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:
- ‚ùå ‡∏ô‡πâ‡∏≥‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ú‡∏±‡∏ô‡πÅ‡∏õ‡∏£‡∏°‡∏≤‡∏Å (>5¬∞C variation)
- ‚ùå ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (Lab-grade)

---

## üåü ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥

### ‚ú® ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å

1. **‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Temperature Sensor**
   - ‡πÉ‡∏ä‡πâ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏á‡∏ó‡∏µ‡πà 25¬∞C
   - ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢
   - ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏á‡πà‡∏≤‡∏¢

2. **Median Filter**
   - ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ 30 samples
   - ‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (Noise)
   - ‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£ ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î

3. **Cubic Regression Formula**
   - ‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö DFRobot Arduino Library
   - ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏™‡∏π‡∏á
   - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏±‡∏ö Standard Solution

4. **Auto-save Calibration**
   - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å K-value ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå
   - ‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á Reboot
   - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà

5. **8 Blockly Blocks**
   - ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î
   - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á TDS (ppm) ‡πÅ‡∏•‡∏∞ EC (mS/cm, ¬µS/cm)
   - Calibrate ‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÉ‡∏ô 1 Block

6. **Dual API**
   - Simple API: `get_tds_ppm(34)`
   - Class API: `sensor.update()`

---

## üì¶ ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå:

```
tds-ec-pro-sensor/
‚îú‚îÄ‚îÄ extension.js          # ‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á Extension
‚îú‚îÄ‚îÄ blocks.js            # Blockly Block Definitions
‚îú‚îÄ‚îÄ generators.js        # Python Code Generators
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îî‚îÄ‚îÄ tds_ec_sensor.py # Python Module ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ESP32
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îî‚îÄ‚îÄ icon.png         # ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô (‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏á)
‚îî‚îÄ‚îÄ README.md           # ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:

1. ‡∏ß‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô `/extensions/` ‡∏Ç‡∏≠‡∏á MicroBlock
2. ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó IDE
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Extension ‡∏à‡∏≤‡∏Å‡πÄ‡∏°‡∏ô‡∏π

---

## üîå ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Hardware

### ‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏¢:

```
TDS Sensor      ‚Üí    ESP32
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
VCC (Red)       ‚Üí    3.3V
GND (Black)     ‚Üí    GND
Signal (Blue)   ‚Üí    GPIO 34
```

### ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á:
- ‡πÉ‡∏ä‡πâ **GPIO 32-39** ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (ADC1)
- **VCC ‡∏ï‡πà‡∏≠ 3.3V** ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà 5V
- ‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏ä‡πâ GPIO 0, 25, 26

---

## üöÄ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### Simplified API (‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢):

```python
import tds_ec_sensor

# ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ TDS
tds = tds_ec_sensor.get_tds_ppm(34)
print(f"TDS: {tds} ppm")

# ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ EC
ec = tds_ec_sensor.get_ec_mspcm(34)
print(f"EC: {ec} mS/cm")
```

### Class API (Arduino Style):

```python
import tds_ec_sensor
import time

# Setup
sensor = tds_ec_sensor.init(pin=34)

# Loop
while True:
    sensor.update()
    tds = sensor.get_tds_value()
    print(f"TDS: {tds:.0f} ppm")
    time.sleep(1)
```

---

## üß© Blockly Blocks

### 8 Blocks ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:

1. **‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ TDS (ppm) ‡∏Ç‡∏≤ [pin]** - ‡∏™‡∏µ‡∏ü‡πâ‡∏≤
2. **‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ EC (mS/cm) ‡∏Ç‡∏≤ [pin]** - ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
3. **‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ EC (¬µS/cm) ‡∏Ç‡∏≤ [pin]** - ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏•
4. **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ K-Value [k]** - ‡∏™‡∏µ‡∏™‡πâ‡∏°
5. **Calibrate Sensor ‡∏Ç‡∏≤ [pin] ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô [ppm]** - ‡∏™‡∏µ‡∏™‡πâ‡∏°‡∏™‡∏î
6. **‡∏î‡∏π‡∏Ñ‡πà‡∏≤ K-Value ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô** - ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤
7. **‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Dict) ‡∏Ç‡∏≤ [pin]** - ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á
8. **‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå ‡∏Ç‡∏≤ [pin]** - ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°

---

## üî¨ ‡∏Å‡∏≤‡∏£ Calibrate

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô Calibrate:

```python
import tds_ec_sensor

# 1. ‡∏à‡∏∏‡πà‡∏°‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÉ‡∏ô‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢ 707 ppm
# 2. Calibrate
sensor = tds_ec_sensor.init(pin=34)
sensor.calibrate(707)

# 3. ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô! K-value ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
```

### ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Blockly:

```blockly
Calibrate Sensor ‡∏Ç‡∏≤ [34] ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô [707]
```

---

## üìä ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô

### TDS (ppm):
- ‡∏ô‡πâ‡∏≥‡∏Å‡∏•‡∏±‡πà‡∏ô: 0-50 ppm
- ‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°: 50-500 ppm
- ‡∏ô‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏õ‡∏≤: 100-300 ppm

### EC ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏Æ‡πÇ‡∏î‡∏£‡πÇ‡∏õ‡∏ô‡∏¥‡∏Å‡∏™‡πå (mS/cm):
- ‡∏Å‡∏•‡πâ‡∏≤‡πÑ‡∏°‡πâ: 0.5-1.0
- ‡∏ú‡∏±‡∏Å‡∏™‡∏•‡∏±‡∏î: 1.2-2.0
- ‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®: 2.0-3.5
- ‡∏û‡∏£‡∏¥‡∏Å: 2.5-4.0

### EC ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏° (¬µS/cm):
- ‡∏ô‡πâ‡∏≥‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå: 0-50
- ‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ: 50-500
- ‡∏ô‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏õ‡∏≤: 200-800

### ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå:
```
1 mS/cm = 1000 ¬µS/cm
1 mS/cm ‚âà 500 ppm
```

---

## üí° ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

### 1. ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏Æ‡πÇ‡∏î‡∏£‡πÇ‡∏õ‡∏ô‡∏¥‡∏Å‡∏™‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

```python
import tds_ec_sensor
import machine
import time

# Setup
sensor = tds_ec_sensor.init(pin=34)
pump_nutrients = machine.Pin(26, machine.Pin.OUT)
pump_water = machine.Pin(27, machine.Pin.OUT)

# Target EC ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏±‡∏Å‡∏™‡∏•‡∏±‡∏î
TARGET_EC_MIN = 1.2
TARGET_EC_MAX = 2.0

while True:
    sensor.update()
    ec = sensor.get_ec_value()
    
    if ec < TARGET_EC_MIN:
        print("‚ö†Ô∏è EC ‡∏ï‡πà‡∏≥ - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πã‡∏¢")
        pump_nutrients.on()
        time.sleep(5)
        pump_nutrients.off()
        
    elif ec > TARGET_EC_MAX:
        print("‚ö†Ô∏è EC ‡∏™‡∏π‡∏á - ‡πÄ‡∏ï‡∏¥‡∏°‡∏ô‡πâ‡∏≥")
        pump_water.on()
        time.sleep(10)
        pump_water.off()
        
    else:
        print(f"‚úÖ EC ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°: {ec:.2f} mS/cm")
    
    time.sleep(300)  # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ
```

### 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≥

```python
import tds_ec_sensor

sensor = tds_ec_sensor.init(pin=34)

while True:
    sensor.update()
    ec_us = sensor.get_ec_value_us()
    
    if ec_us < 50:
        quality = "‡∏ô‡πâ‡∏≥‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå‡∏°‡∏≤‡∏Å"
    elif ec_us <= 500:
        quality = "‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ ‚úÖ"
    else:
        quality = "‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏î‡∏∑‡πà‡∏° ‚ùå"
    
    print(f"EC: {ec_us:.0f} ¬µS/cm | {quality}")
    time.sleep(5)
```

---

## üõ†Ô∏è Troubleshooting

### ‚ùì ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

#### 1. ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ 0 ‡∏ï‡∏•‡∏≠‡∏î
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏™‡∏≤‡∏¢‡πÑ‡∏ü‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≠‡∏î‡∏µ ‡∏´‡∏£‡∏∑‡∏≠ Pin ‡∏ú‡∏¥‡∏î

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**:
```python
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö ADC
import machine
adc = machine.ADC(machine.Pin(34))
adc.atten(machine.ADC.ATTN_11DB)
print(adc.read())  # ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ 0-4095
```

#### 2. ‡∏Ñ‡πà‡∏≤‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡πÑ‡∏õ‡∏°‡∏≤
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏™‡∏Å‡∏õ‡∏£‡∏Å

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**: ‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡∏Å‡∏•‡∏±‡πà‡∏ô

#### 3. ‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô
**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ Calibrate

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**: 
```python
sensor.calibrate(707)
```

#### 4. Import Error
**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ**:
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå `tds_ec_sensor.py` ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô `modules/`
2. Upload ‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏õ‡∏¢‡∏±‡∏á ESP32
3. Reboot ESP32

---

## üìù Best Practices

### ‚úÖ ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥:
1. Calibrate ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á
2. ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏∏‡∏Å 1-2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
3. ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏ô‡πâ‡∏≥‡∏Å‡∏•‡∏±‡πà‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
4. ‡∏£‡∏≠‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏∏‡πà‡∏°‡∏ô‡πâ‡∏≥
5. ‡πÉ‡∏ä‡πâ ADC Pin ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (GPIO 32-39)

### ‚ùå ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥:
1. ‡∏≠‡∏¢‡πà‡∏≤‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÅ‡∏´‡πâ‡∏á‡∏ô‡∏≤‡∏ô >1 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
2. ‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ô‡πâ‡∏≥‡∏£‡πâ‡∏≠‡∏ô >60¬∞C
3. ‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏ä‡πâ GPIO 25, 26
4. ‡∏≠‡∏¢‡πà‡∏≤ Calibrate ‡∏ö‡πà‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
5. ‡∏≠‡∏¢‡πà‡∏≤‡∏à‡∏∏‡πà‡∏°‡∏•‡∏∂‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏™‡πâ‡∏ô Immersion Line

---

## üìö API Reference

### Class API
```python
sensor = GravityTDS()
sensor.set_pin(34)
sensor.begin()
sensor.update()
tds = sensor.get_tds_value()
ec = sensor.get_ec_value()
sensor.calibrate(707)
sensor.set_k_value(1.0523)
sensor.print_info()
```

### Simplified API
```python
tds = get_tds_ppm(pin)
ec = get_ec_mspcm(pin)
calibrate_sensor(pin, 707)
set_kvalue(1.0523)
print_readings(pin)
```

---

## üîó ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- [DFRobot TDS Sensor Wiki](https://www.dfrobot.com/wiki/index.php/Gravity:_Analog_TDS_Sensor_/_Meter_For_Arduino_SKU:_SEN0244)
- [ESP32 ADC Documentation](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/adc.html)

---

## üìÑ License

GNU Lesser General Public License v3.0

---

## üë§ Author

**Cap_Apiluk**
- Version: 4.0.0
- Category: Sensor

---

**Happy Coding! üöÄ**